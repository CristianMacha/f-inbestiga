<h5 mat-dialog-title>{{project.name | titlecase}}</h5>
<div mat-dialog-content>
  <p><strong>Descripcion: </strong>{{project.description}}</p>
  <div *ngIf="project.personProjects.length > 0">
    <p>
      <strong>Solicitado por: </strong>
      {{project.personProjects[0].person.fullName}} {{project.personProjects[0].person.surnames}}
    </p>
    <p><strong>Cel/telf: </strong>{{project.personProjects[0].person.phone}}</p>
    <p><strong>Email: </strong>{{project.personProjects[0].person.user.email}}</p>
  </div>

  <div class="mt-3">
    <form [formGroup]="requestForm">
      <mat-form-field appearance="fill" class="w-100">
        <mat-label>Monto</mat-label>
        <span matPrefix>S/.</span>
        <input matInput type="number" formControlName="amount">
        <mat-error>El monto es necesario.</mat-error>
      </mat-form-field>
      <mat-form-field appearance="fill" class="w-100">
        <mat-label>Fecha de finalizacion</mat-label>
        <input matInput [matDatepicker]="picker" formControlName="expirationDate">
        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
        <mat-error>La fecha de finalizacion es necesaria.</mat-error>
      </mat-form-field>
    </form>
    <mat-form-field appearance="fill" class="w-100" *ngIf="!advisor.id">
      <mat-label>Buscar asesor</mat-label>
      <input
        matInput
        type="text"
        [formControl]="searchControl"
        (keyup.enter)="handleSearchAdvisor()">
      <button mat-icon-button matSuffix (click)="handleSearchAdvisor()">
        <mat-icon>search</mat-icon>
      </button>
    </mat-form-field>
    <mat-error *ngIf="requestForm.controls['advisorId'].touched && requestForm.controls['advisorId'].hasError('min')">
      El asesor es necesario
    </mat-error>
    <div *ngIf="advisor.id">
      <mat-list>
        <mat-list-item>
          <mat-icon mat-list-icon>person</mat-icon>
          <div mat-line>{{advisor.fullName}} {{advisor.surnames}}</div>
          <div mat-line># {{advisor.code}}</div>
          <div>
            <button
              mat-icon-button
              color="warn"
              (click)="handleCloseAdvisor()">
              <mat-icon>close</mat-icon>
            </button>
          </div>
        </mat-list-item>
      </mat-list>
    </div>
  </div>
</div>
<div mat-dialog-actions [align]="'end'">
  <button mat-button (click)="onNoClick()">Cancelar</button>
  <button
    mat-flat-button
    color="primary"
    cdkFocusInitial
    (click)="handleAcceptProject()"
    [disabled]="loading">
    Aceptar
  </button>
</div>
